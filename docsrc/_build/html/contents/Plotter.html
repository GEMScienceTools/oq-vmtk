

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Plotter Module &mdash; OpenQuake Vulnerability Modellers Toolkit Suite  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Storey-Loss Function Generation Module" href="SLFGenerator.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            OpenQuake Vulnerability Modellers Toolkit Suite
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="IMCalculator.html">IM Calculator Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="Calibration.html">Model Calibration Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="Modeller.html">Model Building Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="Postprocessor.html">Postprocessing Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="SLFGenerator.html">Storey-Loss Function Generation Module</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Plotter Module</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OpenQuake Vulnerability Modellers Toolkit Suite</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Plotter Module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/contents/Plotter.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="plotter-module">
<h1>Plotter Module<a class="headerlink" href="#plotter-module" title="Link to this heading"></a></h1>
<p>The <cite>plotter</cite> class is a utility class for creating and customizing various types of
plots for structural analysis results. It provides methods to visualize data from
structural analyses, including cloud analysis, fragility analysis, demand profiles,
vulnerability analysis, and animations of seismic responses. The class also includes
utility methods for setting consistent plot styles and saving plots.</p>
<p><strong>Attributes</strong>:
- <strong>font_sizes</strong>: <cite>dict</cite></p>
<blockquote>
<div><p>Dictionary containing font sizes for titles, labels, ticks, and legends.</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>line_widths</strong>: <cite>dict</cite>
Dictionary containing line widths for thick, medium, and thin lines.</p></li>
<li><p><strong>marker_sizes</strong>: <cite>dict</cite>
Dictionary containing marker sizes for large, medium, and small markers.</p></li>
<li><p><strong>colors</strong>: <cite>dict</cite>
Dictionary containing color schemes for fragility, damage states, and GEM colors.</p></li>
<li><p><strong>resolution</strong>: <cite>int</cite>
Resolution for saving plots (default: 500 DPI).</p></li>
<li><p><strong>font_name</strong>: <cite>str</cite>
Font name for plot text (default: ‘Arial’).</p></li>
</ul>
<p><strong>Methods</strong>:
- <strong>__init__</strong>:</p>
<blockquote>
<div><p>Initializes the <cite>plotter</cite> class with default styles for fonts, line widths, marker sizes, colors, resolution, and font name.</p>
</div></blockquote>
<ul>
<li><p><strong>_set_plot_style(ax, title=None, xlabel=None, ylabel=None, grid=True)</strong>:
Sets consistent plot style for all plots.</p>
<p><strong>Parameters</strong>:
- <strong>ax</strong>: <cite>matplotlib.axes.Axes</cite></p>
<blockquote>
<div><p>The axes object to apply the style to.</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>title</strong>: <cite>str</cite>, optional
The title of the plot. Default is <cite>None</cite>.</p></li>
<li><p><strong>xlabel</strong>: <cite>str</cite>, optional
The label for the x-axis. Default is <cite>None</cite>.</p></li>
<li><p><strong>ylabel</strong>: <cite>str</cite>, optional
The label for the y-axis. Default is <cite>None</cite>.</p></li>
<li><p><strong>grid</strong>: <cite>bool</cite>, optional
Whether to display the grid. Default is <cite>True</cite>.</p></li>
</ul>
</li>
<li><p><strong>_save_plot(output_directory, plot_label)</strong>:
Saves the plot to the specified directory.</p>
<p><strong>Parameters</strong>:
- <strong>output_directory</strong>: <cite>str</cite>, optional</p>
<blockquote>
<div><p>Directory where the plot will be saved. If <cite>None</cite>, the plot is not saved.</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>plot_label</strong>: <cite>str</cite>
The label for the saved plot file (without file extension).</p></li>
</ul>
</li>
<li><p><strong>duplicate_for_drift(peak_drift_list, control_nodes)</strong>:
Creates data for box plots of peak storey drifts.</p>
<p><strong>Parameters</strong>:
- <strong>peak_drift_list</strong>: <cite>list of np.ndarray</cite></p>
<blockquote>
<div><p>A list of arrays containing peak drift values for each floor.</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>control_nodes</strong>: <cite>list</cite>
A list of control nodes (floors) in the structure.</p></li>
</ul>
<p><strong>Returns</strong>:
- <cite>list</cite>: Processed x and y data for plotting.</p>
</li>
<li><p><strong>plot_cloud_analysis(cloud_dict, output_directory=None, plot_label=’cloud_analysis_plot’, xlabel=’Peak Ground Acceleration, PGA [g]’, ylabel=r’Maximum Peak Storey Drift, $theta_{max}$ [%]’)</strong>:
Plots cloud analysis results, including scatter points, regression line, and censoring limits.</p>
<p><strong>Parameters</strong>:
- <strong>cloud_dict</strong>: <cite>dict</cite></p>
<blockquote>
<div><p>A dictionary containing the data for the cloud analysis.</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>output_directory</strong>: <cite>str</cite>, optional
Directory where the plot will be saved. Default is <cite>None</cite>.</p></li>
<li><p><strong>plot_label</strong>: <cite>str</cite>, optional
The label for the saved plot file. Default is <cite>‘cloud_analysis_plot’</cite>.</p></li>
<li><p><strong>xlabel</strong>: <cite>str</cite>, optional
The label for the x-axis. Default is <cite>‘Peak Ground Acceleration, PGA [g]’</cite>.</p></li>
<li><p><strong>ylabel</strong>: <cite>str</cite>, optional
The label for the y-axis. Default is <cite>‘Maximum Peak Storey Drift, $theta_{max}$ [%]’</cite>.</p></li>
</ul>
</li>
<li><p><strong>plot_fragility_analysis(cloud_dict, output_directory=None, plot_label=’fragility_plot’, xlabel=’Peak Ground Acceleration, PGA [g]’)</strong>:
Plots fragility analysis results, showing the probability of exceedance for various damage states.</p>
<p><strong>Parameters</strong>:
- <strong>cloud_dict</strong>: <cite>dict</cite></p>
<blockquote>
<div><p>A dictionary containing the data for the fragility analysis.</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>output_directory</strong>: <cite>str</cite>, optional
Directory where the plot will be saved. Default is <cite>None</cite>.</p></li>
<li><p><strong>plot_label</strong>: <cite>str</cite>, optional
The label for the saved plot file. Default is <cite>‘fragility_plot’</cite>.</p></li>
<li><p><strong>xlabel</strong>: <cite>str</cite>, optional
The label for the x-axis. Default is <cite>‘Peak Ground Acceleration, PGA [g]’</cite>.</p></li>
</ul>
</li>
<li><p><strong>plot_demand_profiles(peak_drift_list, peak_accel_list, control_nodes, output_directory=None, plot_label=’demand_profiles’)</strong>:
Plots demand profiles for peak drifts and accelerations.</p>
<p><strong>Parameters</strong>:
- <strong>peak_drift_list</strong>: <cite>list of np.ndarray</cite></p>
<blockquote>
<div><p>A list of arrays containing peak drift values for each floor.</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>peak_accel_list</strong>: <cite>list of np.ndarray</cite>
A list of arrays containing peak acceleration values for each floor.</p></li>
<li><p><strong>control_nodes</strong>: <cite>list</cite>
A list of control nodes (floors) in the structure.</p></li>
<li><p><strong>output_directory</strong>: <cite>str</cite>, optional
Directory where the plot will be saved. Default is <cite>None</cite>.</p></li>
<li><p><strong>plot_label</strong>: <cite>str</cite>, optional
The label for the saved plot file. Default is <cite>‘demand_profiles’</cite>.</p></li>
</ul>
</li>
<li><p><strong>plot_ansys_results(cloud_dict, peak_drift_list, peak_accel_list, control_nodes, output_directory=None, plot_label=’ansys_results’, cloud_xlabel=’PGA’, cloud_ylabel=’MPSD’)</strong>:
Plots a 2x2 grid of analysis results, including cloud analysis, fragility analysis, and demand profiles.</p>
<p><strong>Parameters</strong>:
- <strong>cloud_dict</strong>: <cite>dict</cite></p>
<blockquote>
<div><p>A dictionary containing the data for the cloud and fragility analyses.</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>peak_drift_list</strong>: <cite>list of np.ndarray</cite>
A list of arrays containing peak drift values for each floor.</p></li>
<li><p><strong>peak_accel_list</strong>: <cite>list of np.ndarray</cite>
A list of arrays containing peak acceleration values for each floor.</p></li>
<li><p><strong>control_nodes</strong>: <cite>list</cite>
A list of control nodes (floors) in the structure.</p></li>
<li><p><strong>output_directory</strong>: <cite>str</cite>, optional
Directory where the plot will be saved. Default is <cite>None</cite>.</p></li>
<li><p><strong>plot_label</strong>: <cite>str</cite>, optional
The label for the saved plot file. Default is <cite>‘ansys_results’</cite>.</p></li>
<li><p><strong>cloud_xlabel</strong>: <cite>str</cite>, optional
The label for the x-axis of the cloud analysis plot. Default is <cite>‘PGA’</cite>.</p></li>
<li><p><strong>cloud_ylabel</strong>: <cite>str</cite>, optional
The label for the y-axis of the cloud analysis plot. Default is <cite>‘MPSD’</cite>.</p></li>
</ul>
</li>
<li><p><strong>plot_vulnerability_analysis(intensities, loss, cov, xlabel, ylabel, output_directory=None, plot_label=’vulnerability_plot’)</strong>:
Plots vulnerability analysis results, including Beta distributions and loss curves.</p>
<p><strong>Parameters</strong>:
- <strong>intensities</strong>: <cite>list of float</cite></p>
<blockquote>
<div><p>A list of intensity measures (e.g., Peak Ground Acceleration, PGA).</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>loss</strong>: <cite>list of float</cite>
A list of mean loss ratios corresponding to each intensity measure.</p></li>
<li><p><strong>cov</strong>: <cite>list of float</cite>
A list of coefficients of variation (CoV) corresponding to each intensity measure.</p></li>
<li><p><strong>xlabel</strong>: <cite>str</cite>
The label for the x-axis.</p></li>
<li><p><strong>ylabel</strong>: <cite>str</cite>
The label for the y-axis.</p></li>
<li><p><strong>output_directory</strong>: <cite>str</cite>, optional
Directory where the plot will be saved. Default is <cite>None</cite>.</p></li>
<li><p><strong>plot_label</strong>: <cite>str</cite>, optional
The label for the saved plot file. Default is <cite>‘vulnerability_plot’</cite>.</p></li>
</ul>
</li>
<li><p><strong>plot_slf_model(out, cache, xlabel, output_directory=None, plot_label=’slf’)</strong>:
Plots Storey Loss Function (SLF) model results.</p>
<p><strong>Parameters</strong>:
- <strong>out</strong>: <cite>dict</cite></p>
<blockquote>
<div><p>A dictionary containing the results of the model.</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>cache</strong>: <cite>dict</cite>
A dictionary containing cached data, including total storey losses and empirical statistics.</p></li>
<li><p><strong>xlabel</strong>: <cite>str</cite>
The label for the x-axis.</p></li>
<li><p><strong>output_directory</strong>: <cite>str</cite>, optional
Directory where the plot will be saved. Default is <cite>None</cite>.</p></li>
<li><p><strong>plot_label</strong>: <cite>str</cite>, optional
The label for the saved plot file. Default is <cite>‘slf’</cite>.</p></li>
</ul>
</li>
<li><p><strong>animate_model_run(control_nodes, acc, dts, nrha_disps, nrha_accels, drift_thresholds, output_directory=None, plot_label=’animation’)</strong>:
Animates the seismic demands for a single nonlinear time-history analysis (NRHA) run.</p>
<p><strong>Parameters</strong>:
- <strong>control_nodes</strong>: <cite>list</cite></p>
<blockquote>
<div><p>A list of nodes (floors) in the model.</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>acc</strong>: <cite>numpy.ndarray</cite>
A 1D array of acceleration values corresponding to the time-history of seismic excitation.</p></li>
<li><p><strong>dts</strong>: <cite>numpy.ndarray</cite>
A 1D array of time steps (in seconds) for the NRHA analysis.</p></li>
<li><p><strong>nrha_disps</strong>: <cite>numpy.ndarray</cite>
A 2D array of node displacements (in meters) for each time step and control node.</p></li>
<li><p><strong>nrha_accels</strong>: <cite>numpy.ndarray</cite>
A 2D array of node accelerations (in g) for each time step and control node.</p></li>
<li><p><strong>drift_thresholds</strong>: <cite>list</cite>
A list of drift thresholds that define the damage states for the nodes in the model.</p></li>
<li><p><strong>output_directory</strong>: <cite>str</cite>, optional
Directory where the animation will be saved. Default is <cite>None</cite>.</p></li>
<li><p><strong>plot_label</strong>: <cite>str</cite>, optional
The label for the saved animation file. Default is <cite>‘animation’</cite>.</p></li>
</ul>
</li>
</ul>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="SLFGenerator.html" class="btn btn-neutral float-left" title="Storey-Loss Function Generation Module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024-2025, GEM Risk.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>